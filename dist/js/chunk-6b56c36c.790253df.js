(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b56c36c"],{"1b9a":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),a={class:"create-post"},r={class:"container"},l=Object(o["h"])("span",null,"Error:",-1),c={class:"blog-info"},u={class:"upload-file"},i=Object(o["h"])("label",{for:"blog-photo"},"Upload Cover Photo",-1),s={class:"editor"},b={class:"blog-actions"},g=Object(o["i"])("Preview Changes");function d(e,t,n,d,v,p){var h=Object(o["C"])("BlogCoverPreview"),j=Object(o["C"])("Loading"),f=Object(o["C"])("QuillEditor"),O=Object(o["C"])("router-link");return Object(o["v"])(),Object(o["g"])("div",a,[Object(o["M"])(Object(o["j"])(h,null,null,512),[[o["I"],d.blogPhotoPreview]]),Object(o["M"])(Object(o["j"])(j,null,null,512),[[o["I"],d.loading]]),Object(o["h"])("div",r,[Object(o["h"])("div",{class:Object(o["p"])([{invisible:!d.error},"err-message"])},[Object(o["h"])("p",null,[l,Object(o["i"])(Object(o["E"])(d.errorMsg),1)])],2),Object(o["h"])("div",c,[Object(o["M"])(Object(o["h"])("input",{type:"text",placeholder:"Enter Blog Title","onUpdate:modelValue":t[0]||(t[0]=function(e){return d.blogTitle=e})},null,512),[[o["H"],d.blogTitle]]),Object(o["h"])("div",u,[i,Object(o["h"])("input",{type:"file",ref:"blogPhoto",id:"blog-photo",onChange:t[1]||(t[1]=function(){return d.fileChange&&d.fileChange.apply(d,arguments)}),accept:".png, .jpg, .jpeg"},null,544),Object(o["h"])("button",{onClick:t[2]||(t[2]=function(){return d.openPreview&&d.openPreview.apply(d,arguments)}),class:Object(o["p"])(["preview",{"button-inactive":!d.blogPhotoFileURL}])}," Preview Photo ",2),Object(o["h"])("span",null,"File Chosen: "+Object(o["E"])(d.blogCoverPhotoName),1)])]),Object(o["h"])("div",s,[Object(o["j"])(f,{theme:"snow",content:d.blogHTML,"onUpdate:content":t[3]||(t[3]=function(e){return d.blogHTML=e}),contentType:"html",toolbar:"full",onImageAdded:d.imageHandler},null,8,["content","onImageAdded"])]),Object(o["h"])("div",b,[Object(o["h"])("button",{onClick:t[4]||(t[4]=function(){return d.updateBlog&&d.updateBlog.apply(d,arguments)})},"Save Changes"),Object(o["j"])(O,{class:"router-button",to:{name:"BlogPreview"}},{default:Object(o["L"])((function(){return[g]})),_:1})])])])}var v=n("1da1"),p=(n("96cf"),n("4de4"),n("d3b7"),n("b0c0"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("5502")),h=n("6c02"),j=n("3a5e"),f=n("93e8"),O=(n("d263"),n("19d5")),m=n("5124");function P(e,t,n,o,a,r,l,c,u,i){var s=function(e,t,n,o){var a=m["d"].ref(),r=a.child("documents/blogPostPhotos/".concat(e.name));r.put(e).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e)}),Object(v["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.getDownloadURL();case 2:a=e.sent,t.insertEmbed(n,"image",a),o();case 5:case"end":return e.stop()}}),e)}))))},b=function(){var s=Object(v["a"])(regeneratorRuntime.mark((function s(){var b,g,d;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,m["b"].collection("blogPosts").doc(c.value);case 2:if(b=s.sent,0===e.value.length||0===t.value.length){s.next=18;break}if(!n.value){s.next=10;break}return o.value=!0,g=m["d"].ref(),d=g.child("documents/BlogCoverPhotos/".concat(a.value)),d.put(n.value).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e),o.value=!1}),Object(v["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,d.getDownloadURL();case 2:return r=n.sent,n.next=5,b.update({blogHTML:t.value,blogCoverPhoto:r,blogCoverPhotoName:a.value,blogTitle:e.value});case 5:return n.next=7,i.dispatch("updatePost",c.value);case 7:o.value=!1,u.push({name:"ViewBlog",params:{blogid:b.id}});case 9:case"end":return n.stop()}}),n)})))),s.abrupt("return");case 10:return o.value=!0,s.next=13,b.update({blogHTML:t.value,blogTitle:e.value});case 13:return s.next=15,i.dispatch("updatePost",c.value);case 15:return o.value=!1,u.push({name:"ViewBlog",params:{blogid:b.id}}),s.abrupt("return");case 18:r.value=!0,l.value="Please ensure Blog Title & Blog Post has been filled!",setTimeout((function(){r.value=!1}),5e3);case 21:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();return{updateBlog:b,imageHandler:s}}var w={name:"CreatePost",components:{Loading:j["a"],BlogCoverPreview:O["a"],QuillEditor:f["a"]},setup:function(){var e=Object(p["b"])(),t=Object(h["d"])(),n=Object(h["c"])(),a=Object(o["A"])(null),r=Object(o["A"])(null),l=Object(o["A"])(!1),c=Object(o["A"])(null),u=Object(o["A"])(null),i=Object(o["A"])(null),s=Object(o["A"])(null),b=Object(o["A"])({modules:{imageResize:{}}});Object(o["t"])(Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return u.value=n.params.blogid,t.next=3,e.state.blogPosts.filter((function(e){return e.blogID===u.value}));case 3:i.value=t.sent,e.commit("setBlogState",i.value[0]);case 5:case"end":return t.stop()}}),t)}))));var g=Object(o["c"])((function(){return e.state.profileId})),d=Object(o["c"])((function(){return e.state.blogPhotoPreview})),j=Object(o["c"])((function(){return e.state.blogPhotoFileURL})),f=Object(o["c"])((function(){return e.state.blogPhotoName})),O=Object(o["c"])({get:function(){return e.state.blogTitle},set:function(t){e.commit("updateBlogTitle",t)}}),m=Object(o["c"])({get:function(){return e.state.blogHTML},set:function(t){e.commit("newBlogPost",t)}}),w=function(){a.value=r.value.files[0];var t=a.value.name;e.commit("fileNameChange",t),e.commit("createFileURL",URL.createObjectURL(a.value))},C=function(){e.commit("openPhotoPreview")},B=P(),L=B.imageHandler,R=P(O,m,a,l,f,c,s,u,t,e),T=R.updateBlog;return{loading:l,error:c,blogPhoto:r,editorSettings:b,updateBlog:T,errorMsg:s,profileId:g,blogCoverPhotoName:f,blogPhotoPreview:d,blogPhotoFileURL:j,blogTitle:O,blogHTML:m,fileChange:w,imageHandler:L,openPreview:C}}},C=(n("d7ba"),n("6b0d")),B=n.n(C);const L=B()(w,[["render",d]]);t["default"]=L},"3c84":function(e,t,n){},d7ba:function(e,t,n){"use strict";n("3c84")}}]);
//# sourceMappingURL=chunk-6b56c36c.790253df.js.map