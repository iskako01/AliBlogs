(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-090e833b"],{"5db0":function(e,t,o){"use strict";o("88e9")},"88e9":function(e,t,o){},c9c2:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),l={class:"create-post"},c={class:"container"},a=Object(n["h"])("span",null,"Error:",-1),r={class:"blog-info"},i={class:"upload-file"},u=Object(n["h"])("label",{for:"blog-photo"},"Upload Cover Photo",-1),b={class:"editor"},s={class:"blog-actions"},g=Object(n["i"])("Post Preview");function d(e,t,o,d,v,p){var h=Object(n["C"])("BlogCoverPreview"),j=Object(n["C"])("Loading"),f=Object(n["C"])("QuillEditor"),O=Object(n["C"])("router-link");return Object(n["v"])(),Object(n["g"])("div",l,[Object(n["M"])(Object(n["j"])(h,null,null,512),[[n["I"],d.blogPhotoPreview]]),Object(n["M"])(Object(n["j"])(j,null,null,512),[[n["I"],d.loading]]),Object(n["h"])("div",c,[Object(n["h"])("div",{class:Object(n["p"])([{invisible:!d.error},"err-message"])},[Object(n["h"])("p",null,[a,Object(n["i"])(Object(n["E"])(d.errorMsg),1)])],2),Object(n["h"])("div",r,[Object(n["M"])(Object(n["h"])("input",{type:"text",placeholder:"Enter Blog Title","onUpdate:modelValue":t[0]||(t[0]=function(e){return d.blogTitle=e})},null,512),[[n["H"],d.blogTitle]]),Object(n["h"])("div",i,[u,Object(n["h"])("input",{type:"file",ref:"blogPhoto",id:"blog-photo",onChange:t[1]||(t[1]=function(){return d.fileChange&&d.fileChange.apply(d,arguments)}),accept:".png, .jpg, .jpeg"},null,544),Object(n["h"])("button",{onClick:t[2]||(t[2]=function(){return d.openPreview&&d.openPreview.apply(d,arguments)}),class:Object(n["p"])(["preview",{"button-inactive":!d.blogPhotoFileURL}])}," Preview Photo ",2),Object(n["h"])("span",null,"File Chosen: "+Object(n["E"])(d.blogCoverPhotoName),1)])]),Object(n["h"])("div",b,[Object(n["j"])(f,{theme:"snow",content:d.blogHTML,"onUpdate:content":t[3]||(t[3]=function(e){return d.blogHTML=e}),contentType:"html",toolbar:"full",onImageAdded:d.imageHandler},null,8,["content","onImageAdded"])]),Object(n["h"])("div",s,[Object(n["h"])("button",{onClick:t[4]||(t[4]=function(){return d.uploadBlog&&d.uploadBlog.apply(d,arguments)})},"Publish Blog"),Object(n["j"])(O,{class:"router-button",to:{name:"BlogPreview"}},{default:Object(n["L"])((function(){return[g]})),_:1})])])])}o("b0c0"),o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("9861");var v=o("6c02"),p=o("5502"),h=o("3a5e"),j=o("93e8"),f=(o("d263"),o("19d5")),O=o("1da1"),m=(o("96cf"),o("5124"));function P(e,t,o,n,l,c,a,r,i,u){var b=function(e,t,o,n){var l=m["d"].ref(),c=l.child("documents/blogPostPhotos/".concat(e.name));c.put(e).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e)}),Object(O["a"])(regeneratorRuntime.mark((function e(){var l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.getDownloadURL();case 2:l=e.sent,t.insertEmbed(o,"image",l),n();case 5:case"end":return e.stop()}}),e)}))))},s=function(){if(0!==e.value.length&&0!==t.value.length){if(o.value){n.value=!0;var b=m["d"].ref(),s=b.child("documents/BlogCoverPhotos/".concat(l.value));return void s.put(o.value).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e),n.value=!1}),Object(O["a"])(regeneratorRuntime.mark((function o(){var c,a,b;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,s.getDownloadURL();case 2:return c=o.sent,o.next=5,Date.now();case 5:return a=o.sent,o.next=8,m["b"].collection("blogPosts").doc();case 8:return b=o.sent,o.next=11,b.set({blogID:b.id,blogHTML:t.value,blogCoverPhoto:c,blogCoverPhotoName:l.value,blogTitle:e.value,profileId:r.value,date:a});case 11:return o.next=13,u.dispatch("getPost");case 13:n.value=!1,i.push({name:"ViewBlog",params:{blogid:b.id}});case 15:case"end":return o.stop()}}),o)}))))}return c.value=!0,a.value="Please ensure you uploaded a cover photo!",void setTimeout((function(){c.value=!1}),5e3)}c.value=!0,a.value="Please ensure Blog Title & Blog Post has been filled!",setTimeout((function(){c.value=!1}),5e3)};return{uploadBlog:s,imageHandler:b}}var w={name:"CreatePost",components:{Loading:h["a"],BlogCoverPreview:f["a"],QuillEditor:j["a"]},setup:function(){var e=Object(p["b"])(),t=Object(v["d"])(),o=Object(n["A"])(null),l=Object(n["A"])(null),c=Object(n["A"])(!1),a=Object(n["A"])(null),r=Object(n["A"])(null),i=Object(n["A"])({modules:{imageResize:{}}}),u=Object(n["c"])((function(){return e.state.profileId})),b=Object(n["c"])((function(){return e.state.blogPhotoPreview})),s=Object(n["c"])((function(){return e.state.blogPhotoFileURL})),g=Object(n["c"])((function(){return e.state.blogPhotoName})),d=Object(n["c"])({get:function(){return e.state.blogTitle},set:function(t){e.commit("updateBlogTitle",t)}}),h=Object(n["c"])({get:function(){return e.state.blogHTML},set:function(t){e.commit("newBlogPost",t)}}),j=function(){o.value=l.value.files[0];var t=o.value.name;e.commit("fileNameChange",t),e.commit("createFileURL",URL.createObjectURL(o.value))},f=function(){e.commit("openPhotoPreview")},O=P(),m=O.imageHandler,w=P(d,h,o,c,g,a,r,u,t,e),C=w.uploadBlog;return{loading:c,error:a,blogPhoto:l,editorSettings:i,errorMsg:r,profileId:u,blogCoverPhotoName:g,blogPhotoPreview:b,blogPhotoFileURL:s,blogTitle:d,blogHTML:h,fileChange:j,imageHandler:m,uploadBlog:C,openPreview:f}}},C=(o("5db0"),o("6b0d")),B=o.n(C);const L=B()(w,[["render",d]]);t["default"]=L}}]);
//# sourceMappingURL=chunk-090e833b.435cd1b9.js.map